+ set -e
+ LOG_DIR=20220913-mdraid-limit
+ JOBS=4
+ CLIENTS=16
+ DURATION_RO=900
+ DURATION_RW=3600
+ RUNS_RO=1
+ RUNS_RW=1
+ MOUNTDIR=/mnt/data
+ DATADIR=/mnt/data/pgdata
+ for level in 0 10 5 6 1
+ pgconf=default
+ for fs in xfs ext4
+ TESTDIR=20220913-mdraid-limit/0/xfs
+ '[' -d 20220913-mdraid-limit/0/xfs ']'
+ mkdir -p 20220913-mdraid-limit/0/xfs
+ CSV='0;default;xfs'
+ rate=4500
+ limit=7
+ echo '===== default 0 xfs 4500 7 ====='
===== default 0 xfs 4500 7 =====
+ l=0
+ '[' 0 == 0 ']'
+ d=6
+ sudo mdadm --zero-superblock --force /dev/sda1
mdadm: Unrecognised md component device - /dev/sda1
+ sudo mdadm --zero-superblock --force /dev/sdb1
mdadm: Unrecognised md component device - /dev/sdb1
+ sudo mdadm --zero-superblock --force /dev/sdc1
mdadm: Unrecognised md component device - /dev/sdc1
+ sudo mdadm --zero-superblock --force /dev/sdd1
mdadm: Unrecognised md component device - /dev/sdd1
+ sudo mdadm --zero-superblock --force /dev/sde1
mdadm: Unrecognised md component device - /dev/sde1
+ sudo mdadm --zero-superblock --force /dev/sdf1
mdadm: Unrecognised md component device - /dev/sdf1
+ sudo mdadm --create -R --verbose /dev/md0 --chunk=64K --level=0 --raid-devices=6 /dev/sda1 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 /dev/sdf1
mdadm: Defaulting to version 1.2 metadata
mdadm: array /dev/md0 started.
+ stride=16
+ stripe_width=96
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=0
+ '[' 0 == 0 ']'
+ break
+ '[' xfs == ext4 ']'
+ sudo mkfs.xfs -f -d su=64k,sw=6 /dev/md0
meta-data=/dev/md0               isize=512    agcount=32, agsize=4575856 blks
         =                       sectsz=4096  attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1    bigtime=0 inobtcount=0
data     =                       bsize=4096   blocks=146427264, imaxpct=25
         =                       sunit=16     swidth=96 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=71497, version=2
         =                       sectsz=4096  sunit=1 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Discarding blocks...Done.
+ sleep 5
+ sudo mount -o relatime /dev/md0 /mnt/data
+ sudo chown postgres:postgres /mnt/data
+ pg_ctl -D /mnt/data/pgdata init
+ cp postgresql-default.conf /mnt/data/pgdata/postgresql.conf
+ pg_ctl -D /mnt/data/pgdata -l 20220913-mdraid-limit/0/xfs/pg.log -w start
waiting for server to start.... done
server started
+ ps ax
+ pg_config
+ psql postgres -c 'select * from pg_settings'
+ sudo mdadm --detail /dev/md0
+ cat /proc/mdstat
+ for scale in 5000
+ dropdb --if-exists test
NOTICE:  database "test" does not exist, skipping
+ createdb test
+ mkdir 20220913-mdraid-limit/0/xfs/5000
++ date +%s
+ t1=1663021349
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663021349.675312
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=0/18810A8
+ pgbench -i -s 5000 test
++ psql -t -A test -c 'select extract(epoch from now()) - 1663021349.675312'
+ d=756.000933
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''0/18810A8'\'')'
+ w=64400489240
++ date +%s
+ t2=1663022105
+ echo '1663021349;1663022105;0;default;xfs;5000;init;756.000933;64400489240'
++ date +%s
+ t1=1663022105
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663022105.683753
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/198BC0
+ vacuumdb --freeze --min-xid-age=1 test
++ psql -t -A test -c 'select extract(epoch from now()) - 1663022105.683753'
+ d=0.108139
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/198BC0'\'')'
+ w=2626624
++ date +%s
+ t2=1663022105
+ echo '1663022105;1663022105;0;default;xfs;5000;vacuum;0.108139;2626624'
++ seq -s ' ' 1 1
+ for r in `seq -s ' ' 1 $RUNS_RO`
+ '[' 5000 == 50 ']'
+ rm -f 'pgbench_log.*'
+ mkdir 20220913-mdraid-limit/0/xfs/5000/run-ro-1
++ date +%s
+ t1=1663022105
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'before;67168600064;11232100352;78408135483'
++ ps ax
++ grep collect-stats
++ grep -v grep
++ wc -l
+ c=0
+ '[' 0 '!=' 0 ']'
+ ./collect-stats.sh 900 20220913-mdraid-limit/0/xfs/5000/run-ro-1
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663022105.821021
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/41A000
+ pgbench -n -M prepared -S -j 4 -c 16 -T 900 -l --sampling-rate=0.01 test
+ tar -czf 20220913-mdraid-limit/0/xfs/5000/run-ro-1/pgbench_log.tgz pgbench_log.27296 pgbench_log.27296.1 pgbench_log.27296.2 pgbench_log.27296.3
+ rm -f pgbench_log.27296 pgbench_log.27296.1 pgbench_log.27296.2 pgbench_log.27296.3
++ psql -t -A test -c 'select extract(epoch from now()) - 1663022105.821021'
+ d=900.694315
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/41A000'\'')'
+ w=2008
++ date +%s
+ t2=1663023006
++ cat 20220913-mdraid-limit/0/xfs/5000/run-ro-1/pgbench.log
++ grep 'without initial'
++ awk '{print $3}'
+ tps=40646.273258
+ echo '1663022105;1663023006;0;default;xfs;5000;ro;40646.273258;900.694315;2008'
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'after;67168600064;11232100352;78408135483'
+ sleep 60
+ psql test -c checkpoint
++ seq -s ' ' 1 1
+ for r in `seq -s ' ' 1 $RUNS_RW`
+ rm -f 'pgbench_log.*'
+ mkdir 20220913-mdraid-limit/0/xfs/5000/run-rw-1
++ date +%s
+ t1=1663023066
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'before;67168600064;11232100352;78408135483'
++ ps ax
++ grep collect-stats
++ grep -v grep
++ wc -l
+ c=0
+ '[' 0 '!=' 0 ']'
+ ./collect-stats.sh 3600 20220913-mdraid-limit/0/xfs/5000/run-rw-1
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663023066.582266
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/41A888
+ pgbench -n -M prepared -N -R 4500 -L 7 -j 4 -c 16 -T 3600 -l --sampling-rate=0.01 test
+ tar -czf 20220913-mdraid-limit/0/xfs/5000/run-rw-1/pgbench_log.tgz pgbench_log.369 pgbench_log.369.1 pgbench_log.369.2 pgbench_log.369.3
+ rm -f pgbench_log.369 pgbench_log.369.1 pgbench_log.369.2 pgbench_log.369.3
++ psql -t -A test -c 'select extract(epoch from now()) - 1663023066.582266'
+ d=3600.453472
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/41A888'\'')'
+ w=133619880376
++ date +%s
+ t2=1663026667
++ cat 20220913-mdraid-limit/0/xfs/5000/run-rw-1/pgbench.log
++ grep 'without initial'
++ awk '{print $3}'
+ tps=4292.028555
+ echo '1663023066;1663026667;0;default;xfs;5000;rw;4292.028555;3600.453472;133619880376'
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=68919083008
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=80158626619
+ echo 'after;68919083008;11232100352;80158626619'
+ sleep 60
+ pg_ctl -D /mnt/data/pgdata -l 20220913-mdraid-limit/0/xfs/pg.log -w -m immediate -t 3600 stop
waiting for server to shut down.... done
server stopped
+ sudo umount /mnt/data
+ sudo mdadm --stop /dev/md0
mdadm: stopped /dev/md0
+ for fs in xfs ext4
+ TESTDIR=20220913-mdraid-limit/0/ext4
+ '[' -d 20220913-mdraid-limit/0/ext4 ']'
+ mkdir -p 20220913-mdraid-limit/0/ext4
+ CSV='0;default;ext4'
+ rate=4500
+ limit=7
+ echo '===== default 0 ext4 4500 7 ====='
===== default 0 ext4 4500 7 =====
+ l=0
+ '[' 0 == 0 ']'
+ d=6
+ sudo mdadm --zero-superblock --force /dev/sda1
+ sudo mdadm --zero-superblock --force /dev/sdb1
+ sudo mdadm --zero-superblock --force /dev/sdc1
+ sudo mdadm --zero-superblock --force /dev/sdd1
+ sudo mdadm --zero-superblock --force /dev/sde1
+ sudo mdadm --zero-superblock --force /dev/sdf1
+ sudo mdadm --create -R --verbose /dev/md0 --chunk=64K --level=0 --raid-devices=6 /dev/sda1 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 /dev/sdf1
mdadm: Defaulting to version 1.2 metadata
mdadm: array /dev/md0 started.
+ stride=16
+ stripe_width=96
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=0
+ '[' 0 == 0 ']'
+ break
+ '[' ext4 == ext4 ']'
+ sudo mkfs.ext4 -F -E stride=16,stripe_width=96 /dev/md0
mke2fs 1.46.5 (30-Dec-2021)
Discarding device blocks:         0/146427264  5242880/146427264 23592960/146427264 44040192/146427264 63963136/146427264 83361792/146427264102236160/146427264121110528/146427264136839168/146427264                   done                            
Creating filesystem with 146427264 4k blocks and 36610048 inodes
Filesystem UUID: 6ce7eae1-0800-4ec6-bd5c-2365f637dde4
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 
	102400000

Allocating group tables:    0/4469         done                            
Writing inode tables:    0/4469         done                            
Creating journal (262144 blocks): done
Writing superblocks and filesystem accounting information:    0/4469         done

+ sleep 5
+ sudo mount -o relatime /dev/md0 /mnt/data
+ sudo chown postgres:postgres /mnt/data
+ pg_ctl -D /mnt/data/pgdata init
+ cp postgresql-default.conf /mnt/data/pgdata/postgresql.conf
+ pg_ctl -D /mnt/data/pgdata -l 20220913-mdraid-limit/0/ext4/pg.log -w start
waiting for server to start.... done
server started
+ ps ax
+ pg_config
+ psql postgres -c 'select * from pg_settings'
+ sudo mdadm --detail /dev/md0
+ cat /proc/mdstat
+ for scale in 5000
+ dropdb --if-exists test
NOTICE:  database "test" does not exist, skipping
+ createdb test
+ mkdir 20220913-mdraid-limit/0/ext4/5000
++ date +%s
+ t1=1663026749
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663026749.480753
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=0/18810A8
+ pgbench -i -s 5000 test
++ psql -t -A test -c 'select extract(epoch from now()) - 1663026749.480753'
+ d=790.183785
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''0/18810A8'\'')'
+ w=64400496904
++ date +%s
+ t2=1663027539
+ echo '1663026749;1663027539;0;default;ext4;5000;init;790.183785;64400496904'
++ date +%s
+ t1=1663027539
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663027539.673395
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/19A9B0
+ vacuumdb --freeze --min-xid-age=1 test
++ psql -t -A test -c 'select extract(epoch from now()) - 1663027539.673395'
+ d=0.110953
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/19A9B0'\'')'
+ w=2627152
++ date +%s
+ t2=1663027539
+ echo '1663027539;1663027539;0;default;ext4;5000;vacuum;0.110953;2627152'
++ seq -s ' ' 1 1
+ for r in `seq -s ' ' 1 $RUNS_RO`
+ '[' 5000 == 50 ']'
+ rm -f 'pgbench_log.*'
+ mkdir 20220913-mdraid-limit/0/ext4/5000/run-ro-1
++ date +%s
+ t1=1663027539
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'before;67168600064;11232100352;78408135483'
++ ps ax
++ grep collect-stats
++ grep -v grep
++ wc -l
+ c=0
+ '[' 0 '!=' 0 ']'
+ ./collect-stats.sh 900 20220913-mdraid-limit/0/ext4/5000/run-ro-1
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663027539.815919
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/41C000
+ pgbench -n -M prepared -S -j 4 -c 16 -T 900 -l --sampling-rate=0.01 test
+ tar -czf 20220913-mdraid-limit/0/ext4/5000/run-ro-1/pgbench_log.tgz pgbench_log.22759 pgbench_log.22759.1 pgbench_log.22759.2 pgbench_log.22759.3
+ rm -f pgbench_log.22759 pgbench_log.22759.1 pgbench_log.22759.2 pgbench_log.22759.3
++ psql -t -A test -c 'select extract(epoch from now()) - 1663027539.815919'
+ d=900.692639
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/41C000'\'')'
+ w=1480
++ date +%s
+ t2=1663028440
++ cat 20220913-mdraid-limit/0/ext4/5000/run-ro-1/pgbench.log
++ grep 'without initial'
++ awk '{print $3}'
+ tps=40372.638454
+ echo '1663027539;1663028440;0;default;ext4;5000;ro;40372.638454;900.692639;1480'
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'after;67168600064;11232100352;78408135483'
+ sleep 60
+ psql test -c checkpoint
++ seq -s ' ' 1 1
+ for r in `seq -s ' ' 1 $RUNS_RW`
+ rm -f 'pgbench_log.*'
+ mkdir 20220913-mdraid-limit/0/ext4/5000/run-rw-1
++ date +%s
+ t1=1663028500
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'before;67168600064;11232100352;78408135483'
++ ps ax
++ grep collect-stats
++ grep -v grep
++ wc -l
+ c=0
+ '[' 0 '!=' 0 ']'
+ ./collect-stats.sh 3600 20220913-mdraid-limit/0/ext4/5000/run-rw-1
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663028500.577190
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/41C678
+ pgbench -n -M prepared -N -R 4500 -L 7 -j 4 -c 16 -T 3600 -l --sampling-rate=0.01 test
+ tar -czf 20220913-mdraid-limit/0/ext4/5000/run-rw-1/pgbench_log.tgz pgbench_log.28299 pgbench_log.28299.1 pgbench_log.28299.2 pgbench_log.28299.3
+ rm -f pgbench_log.28299 pgbench_log.28299.1 pgbench_log.28299.2 pgbench_log.28299.3
++ psql -t -A test -c 'select extract(epoch from now()) - 1663028500.577190'
+ d=3600.444361
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/41C678'\'')'
+ w=133617998824
++ date +%s
+ t2=1663032101
++ cat 20220913-mdraid-limit/0/ext4/5000/run-rw-1/pgbench.log
++ grep 'without initial'
++ awk '{print $3}'
+ tps=4290.484642
+ echo '1663028500;1663032101;0;default;ext4;5000;rw;4290.484642;3600.444361;133617998824'
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=68919083008
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=80158643003
+ echo 'after;68919083008;11232100352;80158643003'
+ sleep 60
+ pg_ctl -D /mnt/data/pgdata -l 20220913-mdraid-limit/0/ext4/pg.log -w -m immediate -t 3600 stop
waiting for server to shut down.... done
server stopped
+ sudo umount /mnt/data
+ sudo mdadm --stop /dev/md0
mdadm: stopped /dev/md0
+ for level in 0 10 5 6 1
+ pgconf=default
+ for fs in xfs ext4
+ TESTDIR=20220913-mdraid-limit/10/xfs
+ '[' -d 20220913-mdraid-limit/10/xfs ']'
+ mkdir -p 20220913-mdraid-limit/10/xfs
+ CSV='10;default;xfs'
+ rate=4500
+ limit=7
+ echo '===== default 10 xfs 4500 7 ====='
===== default 10 xfs 4500 7 =====
+ l=10
+ '[' 10 == 0 ']'
+ '[' 10 == 1 ']'
+ '[' 10 == 10 ']'
+ d=3
+ sudo mdadm --zero-superblock --force /dev/sda1
+ sudo mdadm --zero-superblock --force /dev/sdb1
+ sudo mdadm --zero-superblock --force /dev/sdc1
+ sudo mdadm --zero-superblock --force /dev/sdd1
+ sudo mdadm --zero-superblock --force /dev/sde1
+ sudo mdadm --zero-superblock --force /dev/sdf1
+ sudo mdadm --create -R --verbose /dev/md0 --chunk=64K --level=10 --raid-devices=6 /dev/sda1 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 /dev/sdf1
mdadm: layout defaults to n2
mdadm: layout defaults to n2
mdadm: size set to 97618176K
mdadm: Defaulting to version 1.2 metadata
mdadm: array /dev/md0 started.
+ stride=16
+ stripe_width=48
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=1
+ '[' 1 == 0 ']'
+ sleep 5
+ /bin/true
++ grep finish /proc/mdstat
++ wc -l
+ c=0
+ '[' 0 == 0 ']'
+ break
+ '[' xfs == ext4 ']'
+ sudo mkfs.xfs -f -d su=64k,sw=3 /dev/md0
meta-data=/dev/md0               isize=512    agcount=16, agsize=4575856 blks
         =                       sectsz=4096  attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1    bigtime=0 inobtcount=0
data     =                       bsize=4096   blocks=73213632, imaxpct=25
         =                       sunit=16     swidth=48 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=35748, version=2
         =                       sectsz=4096  sunit=1 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Discarding blocks...Done.
+ sleep 5
+ sudo mount -o relatime /dev/md0 /mnt/data
+ sudo chown postgres:postgres /mnt/data
+ pg_ctl -D /mnt/data/pgdata init
+ cp postgresql-default.conf /mnt/data/pgdata/postgresql.conf
+ pg_ctl -D /mnt/data/pgdata -l 20220913-mdraid-limit/10/xfs/pg.log -w start
waiting for server to start.... done
server started
+ ps ax
+ pg_config
+ psql postgres -c 'select * from pg_settings'
+ sudo mdadm --detail /dev/md0
+ cat /proc/mdstat
+ for scale in 5000
+ dropdb --if-exists test
NOTICE:  database "test" does not exist, skipping
+ createdb test
+ mkdir 20220913-mdraid-limit/10/xfs/5000
++ date +%s
+ t1=1663033648
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663033648.569877
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=0/18810A8
+ pgbench -i -s 5000 test
++ psql -t -A test -c 'select extract(epoch from now()) - 1663033648.569877'
+ d=931.212890
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''0/18810A8'\'')'
+ w=64400490632
++ date +%s
+ t2=1663034579
+ echo '1663033648;1663034579;10;default;xfs;5000;init;931.212890;64400490632'
++ date +%s
+ t1=1663034579
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663034579.792392
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/199130
+ vacuumdb --freeze --min-xid-age=1 test
++ psql -t -A test -c 'select extract(epoch from now()) - 1663034579.792392'
+ d=0.112317
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/199130'\'')'
+ w=2625232
++ date +%s
+ t2=1663034579
+ echo '1663034579;1663034579;10;default;xfs;5000;vacuum;0.112317;2625232'
++ seq -s ' ' 1 1
+ for r in `seq -s ' ' 1 $RUNS_RO`
+ '[' 5000 == 50 ']'
+ rm -f 'pgbench_log.*'
+ mkdir 20220913-mdraid-limit/10/xfs/5000/run-ro-1
++ date +%s
+ t1=1663034579
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'before;67168600064;11232100352;78408135483'
++ ps ax
++ grep collect-stats
++ grep -v grep
++ wc -l
+ c=0
+ '[' 0 '!=' 0 ']'
+ ./collect-stats.sh 900 20220913-mdraid-limit/10/xfs/5000/run-ro-1
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663034579.935316
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/41A000
+ pgbench -n -M prepared -S -j 4 -c 16 -T 900 -l --sampling-rate=0.01 test
+ tar -czf 20220913-mdraid-limit/10/xfs/5000/run-ro-1/pgbench_log.tgz pgbench_log.19816 pgbench_log.19816.1 pgbench_log.19816.2 pgbench_log.19816.3
+ rm -f pgbench_log.19816 pgbench_log.19816.1 pgbench_log.19816.2 pgbench_log.19816.3
++ psql -t -A test -c 'select extract(epoch from now()) - 1663034579.935316'
+ d=900.713646
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/41A000'\'')'
+ w=3400
++ date +%s
+ t2=1663035480
++ cat 20220913-mdraid-limit/10/xfs/5000/run-ro-1/pgbench.log
++ grep 'without initial'
++ awk '{print $3}'
+ tps=41966.519701
+ echo '1663034579;1663035480;10;default;xfs;5000;ro;41966.519701;900.713646;3400'
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'after;67168600064;11232100352;78408135483'
+ sleep 60
+ psql test -c checkpoint
++ seq -s ' ' 1 1
+ for r in `seq -s ' ' 1 $RUNS_RW`
+ rm -f 'pgbench_log.*'
+ mkdir 20220913-mdraid-limit/10/xfs/5000/run-rw-1
++ date +%s
+ t1=1663035540
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=67168600064
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=78408135483
+ echo 'before;67168600064;11232100352;78408135483'
++ ps ax
++ grep collect-stats
++ grep -v grep
++ wc -l
+ c=0
+ '[' 0 '!=' 0 ']'
+ ./collect-stats.sh 3600 20220913-mdraid-limit/10/xfs/5000/run-rw-1
++ psql -t -A test -c 'select extract(epoch from now())'
+ s=1663035540.717023
++ psql -t -A test -c 'select pg_current_wal_lsn()'
+ w=F/41ADF8
+ pgbench -n -M prepared -N -R 4500 -L 7 -j 4 -c 16 -T 3600 -l --sampling-rate=0.01 test
+ tar -czf 20220913-mdraid-limit/10/xfs/5000/run-rw-1/pgbench_log.tgz pgbench_log.25358 pgbench_log.25358.1 pgbench_log.25358.2 pgbench_log.25358.3
+ rm -f pgbench_log.25358 pgbench_log.25358.1 pgbench_log.25358.2 pgbench_log.25358.3
++ psql -t -A test -c 'select extract(epoch from now()) - 1663035540.717023'
+ d=3600.483827
++ psql -t -A test -c 'select pg_wal_lsn_diff(pg_current_wal_lsn(), '\''F/41ADF8'\'')'
+ w=127722248904
++ date +%s
+ t2=1663039141
++ cat 20220913-mdraid-limit/10/xfs/5000/run-rw-1/pgbench.log
++ grep 'without initial'
++ awk '{print $3}'
+ tps=3988.717450
+ echo '1663035540;1663039141;10;default;xfs;5000;rw;3988.717450;3600.483827;127722248904'
++ psql -t -A test -c 'select sum(pg_table_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ st=68838039552
++ psql -t -A test -c 'select sum(pg_indexes_size(oid)) from pg_class where relnamespace = 2200 and relkind = '\''r'\'''
+ si=11232100352
++ psql -t -A test -c 'select pg_database_size('\''test'\'')'
+ sd=80077583163
+ echo 'after;68838039552;11232100352;80077583163'
+ sleep 60
+ pg_ctl -D /mnt/data/pgdata -l 20220913-mdraid-limit/10/xfs/pg.log -w -m immediate -t 3600 stop
waiting for server to shut down.... done
server stopped
+ sudo umount /mnt/data
+ sudo mdadm --stop /dev/md0
mdadm: stopped /dev/md0
+ for fs in xfs ext4
+ TESTDIR=20220913-mdraid-limit/10/ext4
+ '[' -d 20220913-mdraid-limit/10/ext4 ']'
+ mkdir -p 20220913-mdraid-limit/10/ext4
+ CSV='10;default;ext4'
+ rate=4500
+ limit=7
+ echo '===== default 10 ext4 4500 7 ====='
===== default 10 ext4 4500 7 =====
+ l=10
+ '[' 10 == 0 ']'
+ '[' 10 == 1 ']'
+ '[' 10 == 10 ']'
+ d=3
+ sudo mdadm --zero-superblock --force /dev/sda1
+ sudo mdadm --zero-superblock --force /dev/sdb1
+ sudo mdadm --zero-superblock --force /dev/sdc1
+ sudo mdadm --zero-superblock --force /dev/sdd1
+ sudo mdadm --zero-superblock --force /dev/sde1
+ sudo mdadm --zero-superblock --force /dev/sdf1
+ sudo mdadm --create -R --verbose /dev/md0 --chunk=64K --level=10 --raid-devices=6 /dev/sda1 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 /dev/sdf1
mdadm: layout defaults to n2
mdadm: layout defaults to n2
mdadm: super1.x cannot open /dev/sdf1: Device or resource busy
mdadm: /dev/sdf1 is not suitable for this array.
mdadm: create aborted
